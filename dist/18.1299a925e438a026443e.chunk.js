webpackJsonp([18,40],{123:function(t,e,i){var s,a;i(124),s=i(125),a=i(126),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},124:function(t,e){},125:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{show:{type:Boolean,default:!1},time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:{type:String,default:"vux-fade"},width:{type:String,default:"7.6em"},text:String},computed:{toastClass:function(){return{weui_toast_forbidden:"warn"===this.type,weui_toast_cancel:"cancel"===this.type,weui_toast_success:"success"===this.type,weui_toast_text:"text"===this.type}}},watch:{show:function(t){var e=this;t&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("on-hide")},this.time))}}}},126:function(t,e){t.exports=' <div class=vux-toast> <div class=weui_mask_transparent v-show=show></div> <div class=weui_toast :style="{width: width}" :class=toastClass v-show=show :transition=transition> <i class=weui_icon_toast v-show="type !== \'text\'"></i> <p class=weui_toast_content v-if=text v-html=text></p> <p class=weui_toast_content v-else><slot></slot></p> </div> </div> '},195:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.setCartStorage=function(t,e){var i=t.dispatch;i("SETCARTOBJ",e)},e.setCartAgain=function(t,e){var i=t.dispatch;i("SETCARTOBJS",e)},e.increNums=function(t,e,i){var s=t.dispatch;s("INCRECARTNUMS",e,i)},e.reduceNums=function(t,e,i){var s=t.dispatch;s("REDUCECARTNUMS",e,i)},e.delSingle=function(t,e,i){var s=t.dispatch;s("DELCARTOBJ",e,i)},e.delMultiple=function(t,e){var i=t.dispatch;i("DELCARTOBJS",e)},e.clearAll=function(t){var e=t.dispatch;e("CLEARCART")},e.setSelCartStorage=function(t,e){var i=t.dispatch;i("SETSELCART",e)},e.clearSel=function(t){var e=t.dispatch;e("CLEARSELCART")}},200:function(t,e,i){var s,a;i(201),s=i(202),a=i(203),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},201:function(t,e){},202:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String},computed:{classes:function(){return[{weui_btn_disabled:this.disabled,weui_btn_mini:this.mini},"weui_btn_"+this.type,this.plain?"weui_btn_plain_"+this.type:""]}}}},203:function(t,e){t.exports=" <button class=weui_btn :class=classes :disabled=disabled> {{text}}<slot></slot> </button> "},239:function(t,e,i){var s,a;i(240),s=i(241),a=i(242),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},240:function(t,e){},241:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{show:Boolean,text:{type:String,default:"Loading"},position:String}}},242:function(t,e){t.exports=' <div class=weui_loading_toast v-show=show> <div class=weui_mask_transparent></div> <div class=weui_toast :style="{position: position}"> <div class=weui_loading> <div class=weui_loading_leaf v-for="i in 12" :class="[\'weui_loading_leaf_\' + i]"></div> </div> <p class=weui_toast_content>{{text}}<slot></slot></p> </div> </div> '},351:function(t,e,i){var s,a;i(352),s=i(353),a=i(354),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},352:function(t,e){},353:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ready:function(){this.updateStyle()},props:{max:{type:Number,default:5},value:{type:Number,default:0},disabled:Boolean,star:{type:String,default:"★"},activeColor:{type:String,default:"#fc6"},margin:{type:Number,default:2},fontSize:{type:Number,default:25}},computed:{sliceValue:function(){var t=this.value.toString().split(".");return 1===t.length?[t[0],0]:t},cutIndex:function(){return 1*this.sliceValue[0]},cutPercent:function(){return 10*this.sliceValue[1]}},methods:{handleClick:function(t,e){this.disabled&&!e||(this.value===t+1?(this.value=t,this.updateStyle()):this.value=t+1)},updateStyle:function(){for(var t=0;t<this.max;t++)t<=this.value-1?this.colors.$set(t,this.activeColor):this.colors.$set(t,"#ccc")}},data:function(){return{colors:[],cutIndex:-1,cutPercent:0}},watch:{value:function(t){this.updateStyle()}}}},354:function(t,e){t.exports=" <div class=vux-rater> <a class=vux-rater-box v-for=\"i in max\" @click=handleClick(i) :class=\"{'is-active':value > i}\" :style=\"{color: colors && colors[i] ? colors[i] : '#ccc',marginRight:margin+'px',fontSize: fontSize + 'px', width: fontSize + 'px', height: fontSize + 'px', lineHeight: fontSize + 'px'}\"> <span class=vux-rater-inner>{{star}}<span class=vux-rater-outer :style=\"{color: activeColor, width: cutPercent + '%'}\" v-if=\"cutPercent > 0 && cutIndex === i\">{{star}}</span></span> </a> </div> "},381:function(t,e,i){var s,a;i(382),i(383),s=i(384),a=i(399),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},382:function(t,e){},383:function(t,e){},384:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(10),o=s(a),n=i(385),r=s(n),u=i(200),c=s(u),l=i(123),d=s(l),p=i(239),f=s(p),m=i(195);e.default={vuex:{actions:{clearAll:m.clearAll}},data:function(){return{loadingShow:!1,loadingMessage:"",toastMessage:"",toastShow:!1,btnDis:!1,data:{createtime:"",list:[]}}},components:{CommentGroup:r.default,XButton:c.default,Toast:d.default,Loading:f.default},route:{data:function(t){"undefined"!=typeof t.to.params.oid&&t.to.params.oid||(t.abort(),t.go({name:"index"}))}},ready:function(){var t=this,e=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");e=JSON.parse(e),this.$http.get(localStorage.apiDomain+"public/index/user/productscommention/uid/"+e.id+"/token/"+e.token+"/oid/"+this.$route.params.oid).then(function(e){if(1===e.data.status)t.data.createtime=e.data.createtime,t.data.uyhost=e.data.uyhost,t.data.list=e.data.list;else if(e.data.status===-1){t.toastMessage=e.data.info,t.toastShow=!0;var i=t;setTimeout(function(){i.clearAll(),sessionStorage.removeItem("userInfo"),localStorage.removeItem("userInfo"),i.$router.go({name:"login"})},800)}else t.toastMessage=e.data.info,t.toastShow=!0},function(e){t.toastMessage="网络开小差了~",t.toastShow=!0})},methods:{submitComment:function(){var t=this;if(this.data.list.length<=0)return this.toastMessage="提交数据为空",this.toastShow=!0,!1;for(var e=0;e<this.data.list.length;e++){if(this.data.list[e].stars<=0)return this.toastMessage="还有未完成的评分",this.toastShow=!0,!1;if(""==this.data.list[e].content)return this.toastMessage="还有未填写的评论",this.toastShow=!0,!1}this.btnDis=!0,this.loadingMessage="正在提交",this.toastShow=!0;var i=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");i=JSON.parse(i);var s={uid:i.id,token:i.token,oid:this.$route.params.oid,comments:(0,o.default)(this.data.list)};this.$http.post(localStorage.apiDomain+"public/index/user/productscommention",s).then(function(e){if(t.loadingShow=!1,t.toastMessage=e.data.info,t.toastShow=!0,1===e.data.status){var i=t;setTimeout(function(){i.$router.replace({name:"order-detail",params:{oid:i.$route.params.oid}})},800)}else if(e.data.status===-1){var s=t;setTimeout(function(){s.clearAll(),sessionStorage.removeItem("userInfo"),localStorage.removeItem("userInfo"),s.$router.go({name:"login"})},800)}else t.btnDis=!1},function(e){t.toastMessage="网络开小差了~",t.toastShow=!0,t.btnDis=!1})}}}},385:function(t,e,i){var s,a;i(386),s=i(387),a=i(398),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},386:function(t,e){},387:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(351),o=s(a),n=i(388),r=s(n),u=i(123),c=s(u);e.default={components:{Rater:o.default,PicUploader:r.default,Toast:c.default},props:{products:{type:Array,twoWay:!0,default:function(){return[]}}},data:function(){return{toastMessage:"",toastShow:!1}}}},388:function(t,e,i){var s,a;i(389),s=i(390),a=i(397),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},389:function(t,e){},390:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(391),o=s(a);e.default={props:{pid:{type:[String,Number],default:0},imgs:{type:Array,required:!0,twoWay:!0},toastMessage:{type:String,default:"",twoWay:!0},toastShow:{type:Boolean,default:!1,twoWay:!0},ftype:{type:String,default:"file"}},components:{Spinner:o.default},data:function(){return{}},methods:{addPic:function(t){return 0!==this.imgs[t].state||void document.getElementById("img"+this.pid+t).click()},delPic:function(t){var e=!1,i=window.event;i.stopPropagation(),this.imgs[t].state=0,this.imgs[t].url="",document.getElementById("img"+this.pid+t).value="";for(var s=0;s<this.imgs.length;s++)e===!1&&0===this.imgs[s].state?(e=!0,this.imgs[s].active=1):e===!0&&0===this.imgs[s].state&&(this.imgs[s].active=0)},fileClick:function(t){var e=window.event;e.stopPropagation(),document.getElementById("img"+this.pid+t).value=""},getImage:function(t){var e=document.getElementById("img"+this.pid+t);if(this.imgs[t].state=1,this.handleFiles(e.files[0],t)===!1)return this.imgs[t].state=0,e.value="",!1},handleFiles:function(t,e){return this.checkImg(t.type)?void this.getUpInfo(t,e):(this.toastMessage="上传文件类型不是图片",this.toastShow=!0,!1)},checkImg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===t||"string"!=typeof t)return!1;var e=["jpg","jpeg","gif","png"],i=t.split("/")[1];return e.indexOf(i)>=0},getUpInfo:function(t,e){var i=this;if("undefined"==typeof t||null===t)return!1;var s=sessionStorage.getItem("userInfo")||localStorage.getItem("userInfo");s=JSON.parse(s),this.$http.put(localStorage.apiDomain+"/public/index/user/makeInfoForUpyun",{"allow-file-type":"jpg,jpeg,gif,png","ext-param":this.ftype+","+s.id+",1",ftype:t.type}).then(function(s){var a=s.data;1===a.status?i.uploadImgToUpyun(a.url,t,a.policy,a.signature,e,a.domain,a.notify,a.param,a.thumb):(i.toastMessage=a.info,i.toastShow=!0,i.uploadFailed(e))},function(t){i.toastMessage="网络开小差啦~",i.toastShow=!0,i.uploadFailed(e)})},uploadImgToUpyun:function(t,e,i,s,a,o,n,r){var u=this,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",l=new FormData;l.append("file",e),l.append("policy",i),l.append("signature",s),l.append("notify-url",n),l.append("ext-param",r),l.append("x-gmkerl-thumb",c);var d=this;this.$http.post(t,l).then(function(t){var e=JSON.parse(t.data),i=o+e.url;d.imgs[a].state=2,d.imgs[a].url=i,d.imgs[a].w=e["image-width"],d.imgs[a].h=e["image-height"],a<3&&(d.imgs[a+1].active=1)},function(t){u.toastMessage="网络开小差啦~",u.toastShow=!0,u.uploadFailed(a)})},uploadFailed:function(t){this.imgs[t].state=0,document.getElementById("img"+this.pid+t).value=""}}}},391:function(t,e,i){var s,a;i(392),s=i(393),a=i(396),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports.default),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},392:function(t,e){},393:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(394),o=s(a),n=["android","ios","ios-small","bubbles","circles","crescent","dots","lines","ripple","spiral"];e.default={ready:function(){(0,o.default)(this.$el,this.type)},props:{type:{type:String,default:"ios"}},computed:{className:function(){for(var t={},e=0;e<n.length;e++)t["vux-spinner-"+n[e]]=this.type===n[e];return t}}}},394:function(t,e,i){"use strict";function s(t,e,i,o){var n,r,u,c=document.createElement(f[t]||t);for(n in e)if("[object Array]"===Object.prototype.toString.call(e[n]))for(r=0;r<e[n].length;r++)if(e[n][r].fn)for(u=0;u<e[n][r].t;u++)s(n,e[n][r].fn(u,o),c,o);else s(n,e[n][r],c,o);else a(c,n,e[n]);i.appendChild(c)}function a(t,e,i){t.setAttribute(f[e]||e,i)}function o(t,e){var i=t.split(";"),s=i.slice(e),a=i.slice(0,i.length-s.length);return i=s.concat(a).reverse(),i.join(";")+";"+i[0]}function n(t,e){return t/=e/2,t<1?.5*t*t*t:(t-=2,.5*(t*t*t+2))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function i(){g[a]&&(o=g[a](t)())}var a,o;a=e;var n=document.createElement("div");return s("svg",{viewBox:"0 0 64 64",g:[h[a]]},n,a),t.innerHTML=n.innerHTML,i(),t},i(395);var r="translate(32,32)",u="stroke-opacity",c="round",l="indefinite",d="750ms",p="none",f={a:"animate",an:"attributeName",at:"animateTransform",c:"circle",da:"stroke-dasharray",os:"stroke-dashoffset",f:"fill",lc:"stroke-linecap",rc:"repeatCount",sw:"stroke-width",t:"transform",v:"values"},m={v:"0,32,32;360,32,32",an:"transform",type:"rotate",rc:l,dur:d},v={sw:4,lc:c,line:[{fn:function(t,e){return{y1:"ios"===e?17:12,y2:"ios"===e?29:20,t:r+" rotate("+(30*t+(t<6?180:-180))+")",a:[{fn:function(){return{an:u,dur:d,v:o("0;.1;.15;.25;.35;.45;.55;.65;.7;.85;1",t),rc:l}},t:1}]}},t:12}]},h={android:{c:[{sw:6,da:128,os:82,r:26,cx:32,cy:32,f:p}]},ios:v,"ios-small":v,bubbles:{sw:0,c:[{fn:function(t){return{cx:24*Math.cos(2*Math.PI*t/8),cy:24*Math.sin(2*Math.PI*t/8),t:r,a:[{fn:function(){return{an:"r",dur:d,v:o("1;2;3;4;5;6;7;8",t),rc:l}},t:1}]}},t:8}]},circles:{c:[{fn:function(t){return{r:5,cx:24*Math.cos(2*Math.PI*t/8),cy:24*Math.sin(2*Math.PI*t/8),t:r,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:d,v:o(".3;.3;.3;.4;.7;.85;.9;1",t),rc:l}},t:1}]}},t:8}]},crescent:{c:[{sw:4,da:128,os:82,r:26,cx:32,cy:32,f:p,at:[m]}]},dots:{c:[{fn:function(t){return{cx:16+16*t,cy:32,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:d,v:o(".5;.6;.8;1;.8;.6;.5",t),rc:l}},t:1},{fn:function(){return{an:"r",dur:d,v:o("4;5;6;5;4;3;3",t),rc:l}},t:1}]}},t:3}]},lines:{sw:7,lc:c,line:[{fn:function(t){return{x1:10+14*t,x2:10+14*t,a:[{fn:function(){return{an:"y1",dur:d,v:o("16;18;28;18;16",t),rc:l}},t:1},{fn:function(){return{an:"y2",dur:d,v:o("48;44;36;46;48",t),rc:l}},t:1},{fn:function(){return{an:u,dur:d,v:o("1;.8;.5;.4;1",t),rc:l}},t:1}]}},t:4}]},ripple:{f:p,"fill-rule":"evenodd",sw:3,circle:[{fn:function(t){return{cx:32,cy:32,a:[{fn:function(){return{an:"r",begin:t*-1+"s",dur:"2s",v:"0;24",keyTimes:"0;1",keySplines:"0.1,0.2,0.3,1",calcMode:"spline",rc:l}},t:1},{fn:function(){return{an:u,begin:t*-1+"s",dur:"2s",v:".2;1;.2;0",rc:l}},t:1}]}},t:2}]},spiral:{defs:[{linearGradient:[{id:"sGD",gradientUnits:"userSpaceOnUse",x1:55,y1:46,x2:2,y2:46,stop:[{offset:.1,class:"stop1"},{offset:1,class:"stop2"}]}]}],g:[{sw:4,lc:c,f:p,path:[{stroke:"url(#sGD)",d:"M4,32 c0,15,12,28,28,28c8,0,16-4,21-9"},{d:"M60,32 C60,16,47.464,4,32,4S4,16,4,32"}],at:[m]}]}},g={android:function(t){function e(){if(!i.stop){var t=n(Date.now()-s,650),l=1,d=0,p=188-58*t,f=182-182*t;o%2&&(l=-1,d=-64,p=128- -58*t,f=182*t);var m=[0,-101,-90,-11,-180,79,-270,-191][o];a(c,"da",Math.max(Math.min(p,188),128)),a(c,"os",Math.max(Math.min(f,182),0)),a(c,"t","scale("+l+",1) translate("+d+",0) rotate("+m+",32,32)"),r+=4.1,r>359&&(r=0),a(u,"t","rotate("+r+",32,32)"),t>=1&&(o++,o>7&&(o=0),s=Date.now()),requestAnimationFrame(e)}}var i=this;this.stop=!1;var s,o=0,r=0,u=t.querySelector("g"),c=t.querySelector("circle");return function(){return s=Date.now(),e(),i}}}},395:function(t,e){"use strict";for(var i=0,s=["webkit","moz"],a=0;a<s.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[s[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[a]+"CancelAnimationFrame"]||window[s[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var s=(new Date).getTime(),a=Math.max(0,16-(s-i)),o=window.setTimeout(function(){t(s+a)},a);return i=s+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},396:function(t,e){t.exports=" <span class=vux-spinner :class=className></span> "},397:function(t,e){t.exports=' <div class=img-area _v-6447cecd=""> <div class=image @click=addPic($index) :class="{\'unupload\':img.state===0,\'loading\':img.state===1,\'uploaded\':img.state===2,\'active\':img.active===1}" :style="{backgroundImage:img.url.length>0 ? \'url(\'+img.url+\')\' : \'\'}" v-for="img in imgs" _v-6447cecd=""> <spinner type=bubbles class=white-spinner _v-6447cecd=""></spinner> <input type=file id="img{{ pid }}{{ $index }}" name=imgs[] @click=fileClick($index) @change=getImage($index) accept=image/jpeg,image/png,image/gif _v-6447cecd=""> <div class=cross @click=delPic($index) _v-6447cecd="">×</div> </div> </div> '},398:function(t,e){t.exports=' <div class=com-wrapper _v-45ad82c5=""> <div class=card-box v-for="item in products" _v-45ad82c5=""> <div class=pro-mes _v-45ad82c5=""> <div class=shotcut v-lazy:background-image=item.shotcut _v-45ad82c5=""></div> <div class=words _v-45ad82c5=""> <div class=name _v-45ad82c5="">{{ item.name }}</div> <div class=format _v-45ad82c5="">{{ item.fname }}</div> </div> </div> <div class=pro-mes _v-45ad82c5=""> <rater :value.sync=item.stars :margin=20 active-color=#F9AD0C :font-size=30 style=width:100%;text-align:center _v-45ad82c5=""></rater> <textarea class=com-text placeholder=请写下你对宝贝的感受 v-model=item.content _v-45ad82c5=""></textarea> <pic-uploader :imgs.sync=item.imgs :toast-message.sync=toastMessage :toast-show.sync=toastShow :pid=$index ftype=comimg _v-45ad82c5=""></pic-uploader> </div> </div> </div> <toast :show.sync=toastShow type=text _v-45ad82c5="">{{ toastMessage }}</toast> '},399:function(t,e){t.exports=' <div class="htimer nowrap" _v-048adbe8="">成交时间:{{ data.createtime }}</div> <comment-group :products.sync=data.list _v-048adbe8=""></comment-group> <x-button text=发表评价 :disabled=btnDis class=fixbtn @click=submitComment style=z-index:100 _v-048adbe8=""></x-button> <toast :show.sync=toastShow type=text _v-048adbe8="">{{ toastMessage }}</toast> <loading :show=loadingShow :text=loadingMessage _v-048adbe8=""></loading> '}});